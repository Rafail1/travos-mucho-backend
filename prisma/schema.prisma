// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [uuidOssp(map: "uuid-ossp")]
}

model OrderBookSnapshot {
  id           String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  lastUpdateId BigInt
  symbol       String // symbol
  E            DateTime // Message output time
  T            DateTime // Transaction time
  bids         Json[]
  asks         Json[]
}

model DepthUpdates {
  id String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  u  BigInt // Final update ID in event
  E  DateTime // Event time
  T  DateTime // Transaction time 
  s  String // Symbol
  U  BigInt // First update ID in event
  pu BigInt // Final update Id in last stream(ie `u` in last stream)
  b  Json
  a  Json
}

model AggTrades {
  id String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  a  BigInt // Aggregate trade ID
  E  DateTime // Event time
  s  String // Symbol
  p  String // Price
  q  String // Quantity
  f  BigInt // First trade ID
  l  BigInt // Last trade ID
  T  DateTime // Trade time
  m  Boolean // Is the buyer the market maker?
}
